apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - ../base
  - ./ingress.yaml
  - ./secrets.enc.yaml
configMapGenerator:
  - behavior: merge
    literals:
      - enable_graphiql="false"
      - ixgyohn.baseUrl="https://images.otomadb.com"
    name: api-configmap
images:
  - name: graphql-api
    newName: ghcr.io/otomadb/graphql-api
    digest: sha256:84c618ec356a6dd7d964715c9c82f943e09a3c65c55575d65fbe87f58663df17
  - name: postgres-migration
    newName: ghcr.io/otomadb/api-postgres-migration
    newTag: 20231214201404_nicovideo_video_source_registeredat
  - name: meilisearch-syncer
    newName: ghcr.io/otomadb/meilisearch-syncer
    digest: sha256:a4f6946a6d58ac027b1795ebb98a65e8eb304260636ba9eb9d45da7e45177b65
  - name: neo4j-syncer
    newName: ghcr.io/otomadb/neo4j-syncer
    digest: sha256:464a4dd88d281fc8fdf79f909fcda6349a3cde44f04d5f447c8a522723851025
  - name: nicovideo-updater
    newName: ghcr.io/otomadb/nicovideo-updater
    digest: sha256:38b56766512187e9efaea30a1028c912bc2eb0f5d26e8dba022693e84900b8d3
labels:
  - includeSelectors: true
    pairs:
      app.kubernetes.io/env: prod
      app.kubernetes.io/managed-by: kustomize
